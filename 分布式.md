# Gossip 协议

Gossip 协议是一种去中心化的分布式协议，一种传播消息的方式，灵感来源于瘟疫，社交网络。使用 Gossip 协议的有：Redis Cluster, Consul, Apache Cassandra 等

## 原理

Gossip 协议的基本思想：集群中的节点会周期性的随机选择集群中的其他 N 个节点传递自身的信息，接收到信息的节点做同样的事情，经过几轮信息传递之后，每个节点就能够知晓集群中其他节点的信息。在信息交换的过程中，接收到消息的节点不需要回复 ack，即使消息由于某些原因在传播过程中丢失。

在 Gossip 协议中，将 N 替换成了 fanout(端数)，即随机选择的节点数与 fanout 参数有关。


## 优缺点

- 去中心化：Gossip 协议没有中心节点，每个节点都是平等的，可以随时加入或离开集群，从而实现去中心化的通讯
- 伸缩性(scalable)：允许节点的任意增加和减少，并且新增节点最终会与其他节点处于一致的状态
- 容错性(Fault-tolerance): 网络中任意节点的重启或者宕机都不会影响集群中其他节点的运行，天然具有分布系统的容错性
- 最终一致性：集群中出现新消息时，是通过消息传播的方式来通知集群中的其他节点并最终达到一致状态
- 消息冗余：由于节点是随机选择集群中的节点发送消息，因此不可避免的会出现：同一个节点多次处理同样的消息的情况，会浪费 CPU 以及带宽资源
- 拜占庭问题：节点之间的通信不可靠或者存在恶意节点的攻击，导致节点之间无法达成一致。

# 拜占庭问题

拜占庭问题（Byzantine Fault Tolerance Problem）是指在分布式系统中，由于节点之间的通信不可靠或者存在恶意节点的攻击，导致节点之间无法达成一致的问题。



